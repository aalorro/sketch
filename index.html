<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sketchify — Image to Sketch</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>Sketchify</h1>
    <p>Turn your photos into masterpiece sketches with 20+ artistic styles — adjust intensity, brush type, and color while watching live previews. No uploads, no servers — all processing happens locally.</p>
  </header>

  <main>
    <section class="controls">
      <div class="buttons" style="margin-bottom:12px">
        <button id="undo" type="button" title="Undo (Ctrl+Z)">↶</button>
        <button id="redo" type="button" title="Redo (Ctrl+Y)">↷</button>
        <button id="resetAll" type="button" title="Reset all controls">Reset</button>
      </div>
      <label>Load image<input id="file" type="file" accept="image/*" multiple></label>
      <div id="fileInfo" style="display:none;margin-bottom:8px;padding:8px;border-radius:6px;font-size:12px;color:#333">
        <div id="fileCount"></div>
        <div id="fileWarning" style="display:none;margin-top:6px;padding:6px;background:#fff3cd;border:1px solid #ffc107;border-radius:4px;color:#856404">
          ⚠️ Large batch detected. Processing may take several minutes depending on file size and resolution.
        </div>
      </div>

      <div id="imageNav" style="display:none;margin-bottom:12px;padding:8px;background:#f0f0f0;border-radius:6px;text-align:center">
        <div style="font-size:12px;color:#666;margin-bottom:6px">
          <span id="currentImageInfo"></span>
        </div>
        <div style="display:flex;gap:4px">
          <button id="prevImage" type="button" style="flex:1">← Prev</button>
          <button id="nextImage" type="button" style="flex:1">Next →</button>
        </div>
      </div>

      <label>Medium
        <select id="artStyle">
          <option value="pencil">Pencil</option>
          <option value="ink">Ink</option>
          <option value="marker">Marker</option>
          <option value="pen">Pen</option>
        </select>
      </label>

      <label>Style
        <select id="style">
          <optgroup label="Clean line styles">
            <option value="contour">Contour drawing</option>
            <option value="gesture">Gesture sketching</option>
            <option value="lineart">Line art / ink outline</option>
            <option value="crosscontour">Cross-contour</option>
          </optgroup>
          <optgroup label="Shading-driven sketch styles">
            <option value="hatching">Hatching</option>
            <option value="crosshatching">Cross-hatching</option>
            <option value="scribble">Scribble shading</option>
            <option value="stippling">Stippling</option>
            <option value="tonalpencil">Tonal pencil rendering</option>
          </optgroup>
          <optgroup label="Expressive / painterly sketch looks">
            <option value="charcoal">Charcoal sketch</option>
            <option value="drybrush">Dry brush / brush pen sketch</option>
            <option value="inkwash">Ink wash sketch</option>
          </optgroup>
          <optgroup label="Stylized / design-heavy sketch styles">
            <option value="comic">Comic / manga inking</option>
            <option value="fashion">Fashion sketch</option>
            <option value="urban">Urban sketching</option>
            <option value="architectural">Architectural sketch</option>
          </optgroup>
          <optgroup label="Classic fine-art “old master” vibes">
            <option value="academic">Academic figure sketch</option>
            <option value="etching">Etching / engraving style</option>
          </optgroup>
          <optgroup label="Modern / experimental sketch styles">
            <option value="minimalist">Minimalist one-line</option>
            <option value="glitch">Glitch / distorted linework</option>
            <option value="mixedmedia">Mixed-media sketch</option>
          </optgroup>
          <optgroup label="Retro / Vintage">
            <option value="photorealism">Retro pen & ink</option>
            <option value="graphiteportrait">Graphite portrait</option>
            <option value="oilpainting">Oil painting study</option>
            <option value="watercolor">Watercolor study</option>
          </optgroup>
        </select>
      </label>

      <label>Brush
        <select id="brush">
          <option value="line">Line</option>
          <option value="hatch">Hatch</option>
          <option value="crosshatch">Cross-hatch</option>
          <option value="charcoal">Charcoal</option>
          <option value="inkWash">Ink Wash</option>
        </select>
      </label>

      <label>Intensity <input id="intensity" type="range" min="1" max="10" value="6"></label>
      <label>Stroke <input id="stroke" type="range" min="1" max="10" value="3"></label>

      <label><input id="skipHatching" type="checkbox" checked> Skip hatching (clean edges only)</label>

      <label><input id="colorize" type="checkbox"> Colorize (add color to sketch)</label>

      <label>Contrast <input id="contrast" type="range" min="0" max="2" step="0.1" value="1"></label>
      <label>Saturation <input id="saturation" type="range" min="0" max="2" step="0.1" value="1"></label>
      <label>Hue Shift <input id="hueShift" type="range" min="0" max="360" step="5" value="0">°</label>

      <label>Prompt (optional)
        <input id="prompt" type="text" placeholder="e.g. dramatic cross-hatching">
      </label>

      <label>Seed
        <input id="seed" type="number" placeholder="0.." />
      </label>

      <label>Resolution
        <select id="resolution">
          <option value="512">512 px</option>
          <option value="1024" selected>1024 px</option>
          <option value="2048">2048 px</option>
        </select>
      </label>

      <label>Aspect Ratio
        <select id="aspect">
          <option value="1:1">1:1</option>
          <option value="3:4">3:4</option>
          <option value="4:3">4:3</option>
          <option value="16:9">16:9</option>
          <option value="9:16">9:16</option>
        </select>
      </label>

      <label>Output filename
        <input id="outputName" type="text" placeholder="sketchify_20260220_143045">
      </label>

      <fieldset style="border:1px solid var(--border);border-radius:4px;padding:8px;margin:8px 0">
        <legend style="padding:0 4px;font-size:0.9em;font-weight:600">Presets</legend>
        <label>Preset name
          <input id="presetName" type="text" placeholder="e.g. my-charcoal-style">
        </label>
        <div style="display:flex;gap:4px;margin-bottom:8px">
          <button id="savePreset" type="button" style="flex:1">Save Preset</button>
          <button id="deletePreset" type="button" style="flex:1">Delete</button>
        </div>
        <label>Load preset
          <select id="presetSelect">
            <option value="">-- No presets --</option>
          </select>
        </label>
        <button id="loadPreset" type="button" style="width:100%;margin-top:4px">Load Preset</button>
      </fieldset>

      <label><input id="useWebGL" type="checkbox"> Use GPU (WebGL experimental)</label>
      <small id="webglStatus" style="display:none;color:green">✓ GPU accelerated</small>
      <label><input id="useML" type="checkbox"> Use external ML service (default)</label>
      <label>ML Service URL <input id="mlUrl" type="text" value="https://api.example.com/ml-sketch" placeholder="https://your-custom-ml-service.com/api"></label>
      <label><input id="useServer" type="checkbox"> Use server style-transfer (requires running server)</label>
      <label>Server API URL <input id="serverUrl" type="text" value="http://localhost:5001/api/style-transfer-advanced" placeholder="https://example.com/api/style-transfer"></label>

      <div style="margin-top:8px;display:flex;gap:8px">
        <button id="testServer" type="button">Test Server (demo)</button>
        <small style="align-self:center;color:var(--muted)">Posts demo `test_image.png` to server</small>
      </div>

      <div class="buttons" style="margin-bottom:8px">
        <button id="generate" style="width:100%;flex:1">Generate</button>
      </div>

      <div class="buttons">
        <button id="undo" title="Undo (Ctrl+Z)">↶ Undo</button>
        <button id="redo" title="Redo (Ctrl+Y)">↷ Redo</button>
      </div>

      <div class="buttons">
        <button id="downloadPng">Download PNG</button>
        <button id="downloadJpg">Download JPG</button>
        <button id="downloadZip">Download ZIP</button>
      </div>

      <div class="progress-wrap" hidden>
        <div class="progress-bar" id="progressBar"><div id="progressFill"></div></div>
        <div id="progressText" class="note">Idle</div>
      </div>

    </section>

    <section class="preview" style="display:flex; flex-direction:row; gap:16px; align-items:flex-start;">
      <div style="flex:1; text-align:center;">
        <div style="font-size:13px; color:#888; margin-bottom:4px;">Original</div>
        <canvas id="original" width="512" height="512" style="background:#fff;border:1px solid #ccc;max-width:100%;height:auto;display:block;margin:auto"></canvas>
      </div>
      <div style="flex:1; text-align:center;">
        <div style="font-size:13px; color:#888; margin-bottom:4px;">Rendered</div>
        <canvas id="preview" width="512" height="512" style="background:#fff;border:1px solid #ccc;max-width:100%;height:auto;display:block;margin:auto"></canvas>
        <p class="note">Tip: use larger resolutions for better results. Seed makes effects repeatable.</p>
      </div>
    </section>
  </main>

  <footer>
    <small>Deploy this folder to GitHub Pages to run directly from GitHub.</small>
  </footer>

  <script src="jszip.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
